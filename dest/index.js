"use strict";!function(n,e){if("function"==typeof define&&define.amd)define([],e);else{var t=e();n.nclientAPI=t.nclientAPI}}(void 0,function(){var n=require("strophe.js"),e=require("./config"),t={connection:null,init:function(){window.WebSocket&&window.WebSocket.prototype.send?this.setConnection("websocket"):this.setConnection("bosh")},setConnection:function(n){"websocket"==n?this.connection=require("./websocket"):"bosh"==n&&(this.connection=require("./bosh")),this.connection&&(this.connection.addHandler(this.onMessage,null,"message",null,null,null),this.connection.addHandler(this.onPresence,null,"presence",null,null,null))},send:function(n){this.connection.send(n)},changeStatus:function(e){this.send(n.$pres({id:this.connection.clientId}).c("status",null,e).c("priority",null,1))},addInRoom:function(t){var o=n.$pres({from:e.username,to:t+"/"+e.username}).c("x",{xmlns:"http://jabber.org/protocol/muc"});this.send(o)},onMessage:function(n){console.log("onMessage",n),console.log(n);var e=(n.getAttribute("from"),n.getAttribute("type")),t=n.getElementsByTagName("body");return"groupchat"==e&&t.length>0,!0},onPresence:function(n){console.log("onPresence",n)}};return t.init(),t});